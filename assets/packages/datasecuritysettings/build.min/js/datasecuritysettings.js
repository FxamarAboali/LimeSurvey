(function(t){function e(e){for(var n,r,i=e[0],c=e[1],u=e[2],g=0,d=[];g<i.length;g++)r=i[g],s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={main:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){a("115a"),t.exports=a("4872")},"115a":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("a026"),s=a("3730"),o=a.n(s),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-center"},[[a("div",{staticClass:"row"},[a("div",{staticClass:"btn-group",attrs:{"data-toggle":" buttons"}},[a("button",{staticClass:"btn btn-primary",class:0==t.currentShowsurveypolicynotice?"active":"",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.currentShowsurveypolicynotice=0}}},[t._v("\n                    "+t._s(t._f("translate")("Disabled"))+"\n                ")]),a("button",{staticClass:"btn btn-primary",class:1==t.currentShowsurveypolicynotice?"active":"",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.currentShowsurveypolicynotice=1}}},[t._v("\n                    "+t._s(t._f("translate")("Inline text"))+"\n                ")]),a("button",{staticClass:"btn btn-primary",class:2==t.currentShowsurveypolicynotice?"active":"",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.currentShowsurveypolicynotice=2}}},[t._v("\n                    "+t._s(t._f("translate")("Collapsible text"))+"\n                ")])])]),t._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.showsurveypolicynotice>0,expression:"$store.state.showsurveypolicynotice > 0"}],staticClass:"cointainer-center"},[t.$store.state.languages.length>1?a("div",{staticClass:"row"},[a("language-selector",{attrs:{elId:"questioneditor",aLanguages:t.$store.state.languages,parentCurrentLanguage:t.$store.state.activeLanguage},on:{change:t.selectLanguage}})],1):t._e(),a("div",{staticClass:"row scoped-editor-row"},[a("div",{staticClass:"col-sm-6 ls-space margin top-5 bottom-5 scope-contains-ckeditor "},[a("label",{attrs:{for:"inputdataseclabel"}},[t._v(t._s(t._f("translate")("Survey data policy checkbox label:"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentDataseclabel,expression:"currentDataseclabel"}],staticClass:"form-control",attrs:{type:"text",id:"inputdataseclabel",name:"surveyls_policy_notice_label"},domProps:{value:t.currentDataseclabel},on:{input:function(e){e.target.composing||(t.currentDataseclabel=e.target.value)}}})]),a("div",{staticClass:"col-sm-6 ls-space margin top-5 bottom-5 "},[a("div",{staticClass:"col-sm-12 well",domProps:{innerHTML:t._s(t.translate("__INFOTEXT"))}})])]),a("div",{staticClass:"row scoped-editor-row"},[a("div",{staticClass:"col-sm-12 ls-space margin top-5 bottom-5 scope-contains-ckeditor "},[a("label",{},[t._v(t._s(t._f("translate")("Description"))+":")]),a("ckeditor",{attrs:{editor:t.datasecmessageEditorObject,config:{}},model:{value:t.currentDatasecmessage,callback:function(e){t.currentDatasecmessage=e},expression:"currentDatasecmessage"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentDatasecmessage,expression:"currentDatasecmessage"}],attrs:{type:"hidden",name:"surveyls_policy_notice"},domProps:{value:t.currentDatasecmessage},on:{input:function(e){e.target.composing||(t.currentDatasecmessage=e.target.value)}}})],1)])])]],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("hr")])}],c=a("8a60"),u=a.n(c),l=a("fb3d"),g=a.n(l),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"button-toolbar",attrs:{id:t.elId+"-language-selector"}},[a("div",{staticClass:"btn-group"},[t._l(t.getInChunks[0],function(e,n){return a("button",{key:n+"-button",class:"btn btn-"+(n==t.currentLanguage?"primary active":"default"),on:{click:function(e){return e.preventDefault(),t.setCurrentLanguage(n)}}},[t._v("\n                "+t._s(e)+"\n            ")])}),t.getInChunks.length>1?a("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{"data-toggle":"dropdown"}},[t._v("\n                "+t._s(t._f("translate")("More Languages"))+"\n                "),a("span",{staticClass:"caret"})]):t._e(),a("ul",{staticClass:"dropdown-menu"},t._l(t.getInChunks[1],function(e,n){return a("li",{key:n+"-dropdown",on:{click:function(e){return e.preventDefault(),t.setCurrentLanguage(n)}}},[a("a",{attrs:{href:"#"}},[t._v(t._s(e))])])}),0)],2)])])},f=[],p=a("d623"),v=a.n(p),h=a("2593"),m=a.n(h),y=a("ec69"),b=a.n(y),w=a("2acb"),_=a.n(w),L=(a("6cd4"),{name:"language-selector",props:{elId:{type:String,required:!0},aLanguages:{type:[Array,Object],required:!0},parentCurrentLanguage:{type:String,required:!0}},computed:{currentLanguage:{get:function(){return this.parentCurrentLanguage},set:function(t){this.$emit("change",t)}},getInChunks:function(){if(v()(this.aLanguages)<=5)return[this.aLanguages];var t=m()(this.aLanguages,_()(b()(this.aLanguages),0,4)),e=m()(this.aLanguages,_()(b()(this.aLanguages),5));return[t,e]}},methods:{setCurrentLanguage:function(t){this.$emit("change",t)}}}),D=L,x=(a("8ff5"),a("2877")),S=Object(x["a"])(D,d,f,!1,null,"4ffe412a",null),E=S.exports,T=a("795b"),C=a.n(T),k={methods:{__runAjax:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",s={};s[LS.data.csrfTokenName]=LS.data.csrfToken;var o=$.merge(e,s);return new C.a(function(e,s){void 0==$&&s("JQUERY NOT AVAILABLE!"),$.ajax({url:t,method:a||"get",data:o,dataType:n,success:function(t,a,n){e({success:!0,data:t,transferStatus:a,xhr:n})},error:function(t,e,a){s({success:!1,error:a,transferStatus:e,xhr:t})}})})},$_post:function(t,e){return this.__runAjax(t,e,"post")},$_get:function(t,e){return this.__runAjax(t,e,"get")},$_load:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";return this.__runAjax(t,e,a,"html")},$_delete:function(t,e){return this.__runAjax(t,e,"delete")},$_put:function(t,e){return this.__runAjax(t,e,"put")}}},A={name:"lsnextdataseceditor",mixins:[k],components:{"language-selector":E},data:function(){return{datasecmessageEditorObject:g.a,event:null,loading:null}},computed:{isNewSurvey:function(){return window.DataSecTextEditData.isNewSurvey},currentShowsurveypolicynotice:{get:function(){return this.$store.state.showsurveypolicynotice},set:function(t){this.$store.commit("setShowsurveypolicynotice",t)}},currentDataseclabel:{get:function(){return this.$store.state.dataseclabel[this.$store.state.activeLanguage]},set:function(t){this.$store.commit("setDataseclabelForCurrentLanguage",t)}},currentDatasecmessage:{get:function(){return this.$store.state.datasecmessage[this.$store.state.activeLanguage]},set:function(t){this.$store.commit("setDatasecmessageForCurrentLanguage",t)}}},methods:{applyHotkeys:function(){var t=this;u.a.bind("ctrl+right",this.chooseNextLanguage),u.a.bind("ctrl+left",this.choosePreviousLanguage),u.a.bind("ctrl+shift+s",this.submitCurrentState),u.a.bind("ctrl+alt+d",function(){t.$store.commit("toggleDebugMode")})},chooseNextLanguage:function(){this.$log.log("HOTKEY","chooseNextLanguage"),this.$store.commit("nextLanguage")},choosePreviousLanguage:function(){this.$log.log("HOTKEY","choosePreviousLanguage"),this.$store.commit("previousLanguage")},submitCurrentState:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.toggleLoading(),this.$store.dispatch("saveData").then(function(a){t.toggleLoading(),t.$store.state.commit("toggleVisible",!0),1==e&&(window.location.href=a.data.redirect),$("#in_survey_common").trigger("lsStopLoading"),window.LS.notifyFader(a.data.message,"well-lg bg-primary text-center"),t.$log.log("OBJECT AFTER TRANSFER: ",a)},function(e){t.toggleLoading(),t.$store.state.commit("toggleVisible",!0),$("#in_survey_common").trigger("lsStopLoading"),window.LS.notifyFader("Texts could not be stored. Reloading page.","well-lg bg-danger text-center"),setTimeout(function(){window.location.reload()},1500)})},selectLanguage:function(t){this.$log.log("LANGUAGE CHANGED",t),this.$store.commit("setActiveLanguage",t)}},created:function(){this.$store.dispatch("loadData")},mounted:function(){var t=this;$("#advancedDataSecurityTextEditor").on("jquery:trigger",this.jqueryTriggered),this.applyHotkeys(),$("#datasecurity").on("submit",function(t){t.preventDefault()}),window.DataSecTextEditData.isNewSurvey||$("#save-button").on("click",function(e){t.submitCurrentState()}),this.toggleLoading(!1)}},O=A,j=(a("76a5"),Object(x["a"])(O,r,i,!1,null,"c0ab89c8",null)),P=j.exports,N=a("2f62"),G=a("bfa9"),M=a("ead5"),R=a.n(M),I=(a("13ea"),a("ba84")),F=a.n(I),H={setShowsurveypolicynotice:function(t,e){t.showsurveypolicynotice=e},setDataseclabel:function(t,e){t.dataseclabel=e},setDatasecmessage:function(t,e){t.datasecmessage=e},setDatasecerror:function(t,e){t.datasecerror=e},setDataseclabelForCurrentLanguage:function(t,e){n["a"].set(t.dataseclabel,t.activeLanguage,e)},setDatasecmessageForCurrentLanguage:function(t,e){n["a"].set(t.datasecmessage,t.activeLanguage,e)},setDatasecerrorForCurrentLanguage:function(t,e){n["a"].set(t.datasecerror,t.activeLanguage,e)},toggleVisible:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=null===e?!t.visible:e,t.visible=e},setActiveLanguage:function(t,e){t.activeLanguage=e},setLanguages:function(t,e){t.languages=e},nextLanguage:function(t){var e=b()(t.languages),a=F()(e,t.activeLanguage);a<e.length&&(t.activeLanguage=e[a+1])},previousLanguage:function(t){var e=b()(t.languages),a=F()(e,t.activeLanguage);a>0&&(t.activeLanguage=e[a-1])},toggleDebugMode:function(t){t.debugMode=!t.debugMode}},q=(a("ac6a"),a("e814")),B=a.n(q),V=a("2ef0"),J=a.n(V),U=(a("14b9"),a("774e")),Y=a.n(U),K=a("75fc"),Q=a("d225"),W=a("b0b4"),X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(Q["a"])(this,t),this.param=e,this.silencer=a,this.collector=[],this.currentGroupDescription="",this.activeGroups=0,this.timeHolder=null,this.methods=["group","groupEnd","log","trace","time","timeEnd","error","warn"],this.silent={group:function(){},groupEnd:function(){},log:function(){},trace:function(){},time:function(){},timeEnd:function(){},error:function(){},err:function(){},debug:function(){},warn:function(){}}}return Object(W["a"])(t,[{key:"_generateError",value:function(){try{throw new Error}catch(t){return t}}},{key:"_insertParamToArguments",value:function(t){if(""!==this.param){var e=Object(K["a"])(t);return e.unshift(this.param),e}return Y()(arguments)}},{key:"setSilent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.silencer=t||!this.silencer}},{key:"group",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);if("function"!==typeof console.group){var e=t[0]||"GROUP";this.currentGroupDescription=e,this.activeGroups++}else console.group.apply(console,t)}}},{key:"groupEnd",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);"function"!==typeof console.groupEnd?(this.currentGroupDescription="",this.activeGroups--,this.activeGroups=0===this.activeGroups?0:this.activeGroups--):console.groupEnd.apply(console,t)}}},{key:"log",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);"function"!==typeof console.group?(t.shift(),t.unshift(" ".repeat(2*this.activeGroups)),this.log.apply(this,t)):console.log.apply(console,t)}}},{key:"trace",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);if("function"!==typeof console.trace){var e=this._generateError();e.stack?this.log.apply(console,e.stack):(this.log(t),void 0!=arguments.callee&&this.trace.apply(console,arguments.callee))}else console.trace.apply(console,t)}}},{key:"time",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);"function"!==typeof console.time?this.timeHolder=new Date:console.time.apply(console,t)}}},{key:"timeEnd",value:function(){if(!this.silencer){var t=this._insertParamToArguments(arguments);if("function"!==typeof console.timeEnd){var e=new Date-this.timeHolder;this.log("Took ".concat(Math.floor(e/36e5)," hours, ").concat(Math.floor(e/6e4)," minutes and ").concat(Math.floor(e/1e3)," seconds ( ").concat(e," ms)")),this.time=new Date}else console.timeEnd.apply(console,t)}}},{key:"error",value:function(){var t=this._insertParamToArguments(arguments);"function"!==typeof console.error?(this.log("--- ERROR ---"),this.log(t)):console.error.apply(console,t)}},{key:"warn",value:function(){var t=this._insertParamToArguments(arguments);"function"!==typeof console.warn?(this.log("--- WARN ---"),this.log(t)):console.warn.apply(console,t)}}]),t}(),z=X,Z=new z("DataSecTextEdit"),tt=function(t){window.debugState.backend?t.prototype.$log=Z:t.prototype.$log=console.ls.silent},et={updateObjects:function(t,e){},loadData:function(t){k.methods.$_get(window.DataSecTextEditData.connectorBaseUrl+"/getDataSecTextSettings",{}).then(function(e){Z.log("AjaxCall: ",e),t.commit("setShowsurveypolicynotice",B()(e.data.showsurveypolicynotice)),t.commit("setDataseclabel",e.data.textdata.dataseclabel),t.commit("setDatasecmessage",e.data.textdata.datasecmessage),t.commit("setDatasecerror",e.data.textdata.datasecerror),t.commit("setLanguages",e.data.languages),t.commit("setActiveLanguage",J.a.keys(e.data.languages)[0]),t.commit("toggleVisible",!0)})},saveData:function(t){t.commit("toggleVisible",!1);var e=J.a.merge({changes:{showsurveypolicynotice:t.state.showsurveypolicynotice,dataseclabel:t.state.dataseclabel,datasecmessage:t.state.datasecmessage,datasecerror:t.state.datasecerror}},window.LS.data.csrfTokenData);return Z.log("OBJECT TO BE TRANSFERRED: ",{dataSecTextData:e}),k.methods.$_post(window.DataSecTextEditData.connectorBaseUrl+"/saveDataSecTextData",e)}},at={visible:!1,showsurveypolicynotice:0,dataseclabel:[],datasecmessage:[],datasecerror:[],languages:[],survey:{},debugMode:!1,activeLanguage:""};n["a"].use(R.a),n["a"].use(N["a"]);var nt=function(t){var e=new G["a"]({key:"lsdatasecedit_"+t,storage:window.localStorage});return new N["a"].Store({state:at,plugins:[e.plugin],mutations:H,actions:et})};n["a"].config.ignoredElements=["x-test"],n["a"].use(tt),n["a"].use(o.a),n["a"].mixin({methods:{toggleLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t?"none"!=$("#datasecTextEditLoader").css("display")?$("#datasecTextEditLoader").fadeOut(400):$("#datasecTextEditLoader").fadeIn(200):t?$("#datasecTextEditLoader").fadeIn(200):$("#datasecTextEditLoader").fadeOut(400)},translate:function(t){return window.DataSecTextEditData.i10N[t]||t}},filters:{translate:function(t){return window.DataSecTextEditData.i10N[t]||t}}});var st=nt(LS.parameters.surveyid||0);new n["a"]({el:"#advancedDataSecurityTextEditor",store:st,components:{lsdatasectexteditor:P}})},3015:function(t,e,a){},4872:function(t,e,a){},"70a0":function(t,e,a){},"76a5":function(t,e,a){"use strict";var n=a("70a0"),s=a.n(n);s.a},"8ff5":function(t,e,a){"use strict";var n=a("3015"),s=a.n(n);s.a}});
//# sourceMappingURL=datasecuritysettings.js.map